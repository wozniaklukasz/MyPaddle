function createBricks(a){var b=a.x;for(c=0;c<a.columns;c++){bricks[c]=[];var d=a.y;for(r=0;r<a.rows;r++)bricks[c][r]=new e(b,d,40,40,3),d+=a.marginTop;b+=a.marginLeft}a.created=!0}function setText(){setPlayerLives()}function setPlayerLives(){document.getElementById("player1-lives").innerHTML=player1.lives,document.getElementById("player2-lives").innerHTML=player2.lives}function brickDamage(a){a.lives--,0==a.lives}function movePaddle(){paddle1_rightKeyPressed?movePaddleRight(paddle1):paddle1_leftKeyPressed&&movePaddleLeft(paddle1),paddle2_rightKeyPressed?movePaddleRight(paddle2):paddle2_leftKeyPressed&&movePaddleLeft(paddle2)}function movePaddleRight(a){a.positionX<canvas.width-a.width&&(a.positionX+=a.speed)}function movePaddleLeft(a){a.positionX>0&&(a.positionX-=a.speed)}function moveBall(a){a.x+=a.dx,a.y+=a.dy,(a.x>canvas.width-a.radius||a.x<0+a.radius)&&(a.dx=-a.dx),a.y<paddle1.height+a.radius?paddleHit(a,paddle1,player1):a.y>canvas.height-paddle1.height-a.radius&&paddleHit(a,paddle2,player2),collisionDetection(a)}function collisionDetection(a){for(c=0;c<brickPositionDef.columns;c++)for(r=0;r<brickPositionDef.rows;r++){let b=bricks[c][r];b.lives>0&&(a.x>=b.x-a.radius&&a.x<=b.x+b.width+a.radius&&(.5+a.y-a.radius!=b.y+b.height&&.5+a.y+a.radius!=b.y&&a.y-a.radius!=b.y+b.height&&a.y+a.radius!=b.y||(a.dy=-a.dy,brickDamage(bricks[c][r]))),a.y>=b.y-a.radius&&a.y<=b.y+b.height+a.radius&&(.5+a.x+a.radius!=b.x&&.5+a.x-a.radius!=b.x+b.width&&a.x+a.radius!=b.x&&a.x-a.radius!=b.x+b.width||(a.dx=-a.dx,brickDamage(bricks[c][r]))))}}function paddleHit(a,b,c){a.x>=b.positionX&&a.x<=b.positionX+b.width?a.dy=-a.dy:(a.dy=-a.dy,c.lives--,setPlayerLives())}function draw(){canvasContext.clearRect(0,0,canvas.width,canvas.height),drawBricks(brickPositionDef),drawBall(ball1),drawPaddle(paddle1),drawPaddle(paddle2),moveBall(ball1),movePaddle()}function drawPaddle(a){canvasContext.beginPath(),canvasContext.rect(a.positionX,a.positionY,a.width,a.height),canvasContext.fillStyle=a.color,canvasContext.fill(),canvasContext.closePath()}function drawBall(a){canvasContext.beginPath(),canvasContext.arc(a.x,a.y,a.radius,0,2*Math.PI,!1),canvasContext.fillStyle=a.color,canvasContext.fill(),canvasContext.closePath()}function drawBricks(a){for(a.created||createBricks(a),c=0;c<a.columns;c++)for(r=0;r<a.rows;r++)canvasContext.beginPath(),canvasContext.rect(bricks[c][r].x,bricks[c][r].y,bricks[c][r].width,bricks[c][r].height),bricks[c][r].lives>0?canvasContext.fillStyle="#0095DD":canvasContext.fillStyle="#556270",canvasContext.fill(),canvasContext.closePath()}function init(){setText()}var paddle1_rightKeyPressed=!1,paddle1_leftKeyPressed=!1,paddle2_rightKeyPressed=!1,paddle2_leftKeyPressed=!1,pressedKeys={};onkeydown=onkeyup=function(a){a=a||event,pressedKeys[a.keyCode]="keydown"==a.type,paddle1_rightKeyPressed=!!pressedKeys[39],paddle1_leftKeyPressed=!!pressedKeys[37],paddle2_rightKeyPressed=!!pressedKeys[68],paddle2_leftKeyPressed=!!pressedKeys[65]};class a{constructor(a,b,c,d,e,f){this.x=a,this.y=b,this.dx=c,this.dy=d,this.radius=e,this.color=f}}class b{constructor(a,b,c,d,e){this.width=a,this.height=b,this.positionX=(canvas.width-a)/2,this.positionY=c,this.speed=d,this.color=e}}class d{constructor(a){this.lives=a}}class e{constructor(a,b,c,d,e){this.x=a,this.y=b,this.width=c,this.height=d,this.lives=e}}class f{constructor(a,b,c,d,e,f){this.rows=a,this.columns=b,this.x=c,this.y=d,this.marginTop=e,this.marginLeft=f,this.created=!1}}var canvas=document.getElementById("myCanvas"),canvasContext=canvas.getContext("2d"),ball1=new a((canvas.width-5)/2,(canvas.height-5)/2,2,2,10,"#E84A5F"),ball2=new a(500,10,3,1,10,"#E8A45F"),paddle1=new b(150,5,0,7,"#CBE86B"),paddle2=new b(150,5,canvas.height-5,7,"#CB8E6B"),player1=new d(3),player2=new d(3),bricks=[],brickPositionDef=new f(4,4,150,80,100,100);window.onload=function(){init(),setInterval(draw,10)};